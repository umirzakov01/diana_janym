<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–î–∏–∞–Ω–µ üíó</title>

  <style>
    /* ===== Kudry font from file —Ä—è–¥–æ–º —Å index.html ===== */
    @font-face{
      font-family: "Kudry";
      src: url("kudry.woff2") format("woff2");
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }

    :root{
      --bg1:#fff0f7;
      --bg2:#ffe2ef;
      --bg3:#ffd2e6;
      --hot:#ff4d8d;
      --hot2:#ff2f78;

      --text:#25161d;
      --muted:#7a5060;

      --glass: rgba(255,255,255,.86);
      --stroke: rgba(255,77,141,.18);
      --shadow: 0 22px 70px rgba(25,10,17,.18);
      --shadow2: 0 14px 30px rgba(255,77,141,.16);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: "Kudry", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 650px at 20% 20%, var(--bg1), transparent 60%),
        radial-gradient(900px 650px at 80% 30%, var(--bg2), transparent 60%),
        radial-gradient(700px 520px at 60% 90%, var(--bg3), transparent 55%),
        linear-gradient(180deg, #fff, #fff6fa);
      overflow-x:hidden;
    }

    /* hearts start immediately */
    .heart{
      position:fixed;
      bottom:-30px;
      width:16px;height:16px;
      transform: rotate(45deg);
      background: rgba(255,77,141,.48);
      border-radius:4px;
      animation: floatUp linear forwards;
      pointer-events:none;
      z-index:0;
      filter: blur(.1px);
    }
    .heart:before,.heart:after{
      content:"";
      position:absolute;
      width:16px;height:16px;
      background: inherit;
      border-radius:50%;
    }
    .heart:before{ left:-8px; top:0; }
    .heart:after{ left:0; top:-8px; }
    @keyframes floatUp{
      from{ transform: translateY(0) rotate(45deg); opacity:.9; }
      to{ transform: translateY(-110vh) rotate(45deg); opacity:0; }
    }

    .wrap{
      position:relative;
      z-index:1;
      min-height:100svh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 22px 16px 44px;
    }

    .panel{
      width:min(860px,100%);
      background: var(--glass);
      backdrop-filter: blur(12px);
      border: 1px solid var(--stroke);
      border-radius: 28px;
      box-shadow: var(--shadow);
      padding: 22px;
      position:relative;
      overflow:hidden;
      text-align:center;
    }

    .shine{
      position:absolute;
      inset:-160px;
      pointer-events:none;
      background:
        radial-gradient(circle at 22% 18%, rgba(255,77,141,.18), transparent 45%),
        radial-gradient(circle at 78% 22%, rgba(255,182,213,.22), transparent 42%),
        radial-gradient(circle at 52% 85%, rgba(255,77,141,.10), transparent 40%);
    }

    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 10px;
    }
    .badge{
      font-size:12px;
      font-weight:900;
      letter-spacing:.14em;
      color:#b23563;
      background: rgba(255,77,141,.12);
      border: 1px solid rgba(255,77,141,.18);
      padding: 8px 10px;
      border-radius:999px;
      user-select:none;
      white-space:nowrap;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; /* –¥–ª—è —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ */
    }

    h1{
      margin: 10px 0 6px;
      font-size: clamp(36px, 5.2vw, 64px);
      line-height:1.02;
      letter-spacing:.02em;
    }
    .subtitle{
      margin:0 0 14px;
      color:var(--muted);
      font-size: 16px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    .card{
      margin: 0 auto;
      background: rgba(255,255,255,.90);
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 26px;
      box-shadow: var(--shadow2);
      padding: 18px 16px 16px;
      max-width: 640px;
      position:relative;
      overflow:hidden;
    }

    /* ===== Penguin from your photo + cute animation ===== */
    .penguinWrap{
      width: 170px;
      height: 170px;
      margin: 6px auto 10px;
      position:relative;
      border-radius: 999px;
      background: rgba(255,77,141,.08);
      border: 1px solid rgba(255,77,141,.18);
      box-shadow: 0 14px 30px rgba(255,77,141,.15);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    .penguinImg{
      width: 150px;
      height: 150px;
      object-fit: cover;
      border-radius: 999px;
      animation: bob 1.8s ease-in-out infinite;
      transform-origin: 50% 80%;
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.12));
    }
    @keyframes bob{
      0%,100%{ transform: translateY(0) rotate(-1deg); }
      50%{ transform: translateY(-6px) rotate(1deg); }
    }

    /* blink overlay (soft) */
    .blink{
      position:absolute;
      inset: 20px;
      border-radius: 999px;
      background: rgba(0,0,0,.12);
      transform: scaleY(0);
      transform-origin: 50% 50%;
      animation: blink 4.3s infinite;
      mix-blend-mode: multiply;
      opacity:.35;
      pointer-events:none;
    }
    @keyframes blink{
      0%, 92%, 100% { transform: scaleY(0); }
      94% { transform: scaleY(1); }
      96% { transform: scaleY(0); }
    }

    /* little heart above penguin */
    .pHeart{
      position:absolute;
      top: 6px;
      left: 50%;
      width: 18px; height: 18px;
      transform: translateX(-50%) rotate(45deg);
      background: rgba(255,77,141,.70);
      border-radius: 4px;
      animation: heartPop 1.6s ease-in-out infinite;
    }
    .pHeart:before,.pHeart:after{
      content:"";
      position:absolute;
      width: 18px; height:18px;
      background: inherit;
      border-radius:50%;
    }
    .pHeart:before{ left:-9px; top:0; }
    .pHeart:after{ left:0; top:-9px; }
    @keyframes heartPop{
      0%,100%{ transform: translateX(-50%) rotate(45deg) scale(.92); opacity:.72; }
      50%{ transform: translateX(-50%) rotate(45deg) scale(1.05); opacity:.95; }
    }

    .question{
      font-size: 22px;
      font-weight: 900;
      margin: 8px 0 6px;
    }
    .hint{
      margin:0 0 12px;
      color: rgba(122,80,96,.9);
      font-size: 13px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    .btnRow{
      display:flex;
      gap: 12px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 8px;
    }
    button{
      border:none;
      cursor:pointer;
      border-radius:999px;
      padding: 14px 22px;
      font-weight: 950;
      letter-spacing:.03em;
      transition: transform .15s ease, box-shadow .15s ease, filter .15s ease, opacity .15s ease;
      touch-action: manipulation;
      user-select:none;
      min-width: 150px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    #yesBtn{
      background: linear-gradient(180deg, var(--hot), var(--hot2));
      color:#fff;
      box-shadow: 0 16px 28px rgba(255,77,141,.35);
      transform: scale(1);
    }
    #noBtn{
      background: rgba(255,255,255,.98);
      color:#b23563;
      border: 2px solid rgba(255,77,141,.32);
      box-shadow: 0 14px 26px rgba(255,77,141,.12);
      transform: scale(1);
    }

    .counter{
      margin-top: 12px;
      text-align:center;
      font-size: 13px;
      color:#b23563;
      background: rgba(255,77,141,.10);
      border: 1px dashed rgba(255,77,141,.25);
      border-radius: 16px;
      padding: 8px 10px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* ===== Modal (bottom sheet like iOS) ===== */
    .modal{
      position:fixed;
      inset:0;
      display:none;
      align-items:flex-end;
      justify-content:center;
      background: rgba(22,10,16,.45);
      z-index:50;
    }
    .modal.show{ display:flex; }

    .sheet{
      width: min(920px, 100%);
      height: min(92svh, 900px);
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(255,77,141,.18);
      border-radius: 28px 28px 0 0;
      box-shadow: 0 -30px 90px rgba(0,0,0,.25);
      overflow:hidden;
      position:relative;
    }
    .sheetHeader{
      padding: 12px 14px 10px;
      border-bottom: 1px solid rgba(0,0,0,.06);
      background: linear-gradient(180deg, rgba(255,240,246,.95), rgba(255,255,255,0));
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }
    .sheetHeader h2{
      margin:0;
      font-size: 22px;
      line-height:1.2;
    }
    .sheetHeader p{
      margin: 6px 0 0;
      color: var(--muted);
      font-size: 14px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .closeBtn{
      background: rgba(255,77,141,.12);
      border: 1px solid rgba(255,77,141,.22);
      color:#b23563;
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 950;
      cursor:pointer;
      white-space:nowrap;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    .sheetBody{
      height: calc(100% - 62px);
      overflow:auto;
      padding: 14px 14px 18px;
    }

    .letter{
      background:#fff;
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 24px;
      padding: 16px 14px;
      box-shadow: 0 12px 28px rgba(255,77,141,.12);
      position:relative;
      overflow:hidden;
      max-width: 760px;
      margin: 0 auto;
    }
    .ribbon{
      position:absolute;
      top:16px;
      right:-58px;
      transform: rotate(35deg);
      background: linear-gradient(180deg, var(--hot), var(--hot2));
      color:#fff;
      font-weight: 950;
      padding: 10px 78px;
      letter-spacing:.10em;
      font-size: 12px;
      box-shadow: 0 12px 24px rgba(255,77,141,.35);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    .letterTitle{
      margin: 0 0 10px;
      font-size: 26px;
      text-align:center;
    }

    .sentence{
      margin: 0 0 10px;
      color:#4e2c3a;
      line-height: 1.7;
      font-size: 18px;
      text-align:center;
      padding: 0 2px;
    }

    .inlinePhoto{
      width: 100%;
      border-radius: 18px;
      margin: 10px 0 16px;
      display:block;
      border: 1px solid rgba(0,0,0,.06);
      box-shadow: 0 12px 26px rgba(0,0,0,.10);
      max-height: 520px;
      object-fit: cover;
    }

    .sig{
      margin-top: 10px;
      text-align:right;
      color: var(--muted);
      font-size: 14px;
      font-style: italic;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* confetti canvas */
    #confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:60;
      display:none;
    }
    #confetti.show{ display:block; }
  </style>
</head>

<body>
  <canvas id="confetti"></canvas>

  <div class="wrap">
    <div class="panel">
      <div class="shine"></div>

      <div class="top">
        <div class="badge">SOFT PINK</div>
        <div class="badge" id="dateBadge"></div>
      </div>

      <h1>BE MY VALENTINE üíå</h1>
      <div class="subtitle">–î–∏–∞–Ω–∞‚Ä¶ –ø–∏–Ω–≥–≤–∏–Ω—ë–Ω–æ–∫ –≤ —Ñ–∞—Ä—Ç—É–∫–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –ø–∏—Å—å–º–æ üíó</div>

      <div class="card">
        <div class="penguinWrap">
          <div class="pHeart"></div>
          <img class="penguinImg" src="penguin.jpg" alt="–ü–∏–Ω–≥–≤–∏–Ω" />
          <div class="blink"></div>
        </div>

        <div class="question" id="questionText">–î–∏–∞–Ω–∞, –±—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π?</div>
        <div class="hint">–ù–ï–¢ —É–º–µ–Ω—å—à–∏—Ç—Å—è, –î–ê —É–≤–µ–ª–∏—á–∏—Ç—Å—è</div>

        <div class="btnRow">
          <button id="yesBtn">–î–ê üíñ</button>
          <button id="noBtn">–ù–ï–¢ üôà</button>
        </div>

        <div class="counter" id="counterText">–ù–ï–¢ –Ω–∞–∂–∞–ª–∏: 0 —Ä–∞–∑</div>
      </div>
    </div>
  </div>

  <!-- Music -->
  <audio id="loveMusic" loop>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <!-- Modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true">
    <div class="sheet">
      <div class="sheetHeader">
        <div>
          <h2>–ü–∏—Å—å–º–æ –¥–ª—è –î–∏–∞–Ω—ã üíå</h2>
          <p>—Ñ–æ—Ä–º–∞—Ç: –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ ‚Üí —Ñ–æ—Ç–æ (1‚Äì9)</p>
        </div>
        <button class="closeBtn" id="closeBtn">–ó–∞–∫—Ä—ã—Ç—å ‚úñ</button>
      </div>

      <div class="sheetBody">
        <div class="letter">
          <div class="ribbon">LOVE</div>
          <div class="letterTitle">–î–∏–∞–Ω–∞,</div>

          <div id="letterContent"></div>

          <div class="sig">‚Äî –æ—Ç: <span id="fromName">–¢–í–û–Å –ò–ú–Ø</span></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ====== –í–°–¢–ê–í–¨ –°–Æ–î–ê –°–í–û–Å –ü–ò–°–¨–ú–û (—Ç–æ—á–Ω–æ –∫–∞–∫ —Ç—ã –ø–∏—Å–∞–ª) ======
    // –°–î–ï–õ–ê–ô 9 –ü–†–ï–î–õ–û–ñ–ï–ù–ò–ô (–∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ = –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ)
    const LETTER_SENTENCES = [
      "–í–°–¢–ê–í–¨ –¢–£–¢ 1-–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
      "–í–°–¢–ê–í–¨ –¢–£–¢ 2-–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
      "–í–°–¢–ê–í–¨ –¢–£–¢ 3-–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
      "–í–°–¢–ê–í–¨ –¢–£–¢ 4-–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
      "–í–°–¢–ê–í–¨ –¢–£–¢ 5-–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
      "–í–°–¢–ê–í–¨ –¢–£–¢ 6-–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
      "–í–°–¢–ê–í–¨ –¢–£–¢ 7-–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
      "–í–°–¢–ê–í–¨ –¢–£–¢ 8-–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.",
      "–í–°–¢–ê–í–¨ –¢–£–¢ 9-–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ."
    ];
    // ==========================================================

    const fromName = "–¢–í–û–Å –ò–ú–Ø"; // –≤–ø–∏—à–∏ —Å–≤–æ—ë –∏–º—è
    const photos = Array.from({length:9}, (_,i)=> `photos/${i+1}.jpg`);

    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const counterText = document.getElementById("counterText");
    const questionText = document.getElementById("questionText");

    const modal = document.getElementById("modal");
    const closeBtn = document.getElementById("closeBtn");
    const loveMusic = document.getElementById("loveMusic");

    const fromNameEl = document.getElementById("fromName");
    const letterContent = document.getElementById("letterContent");
    fromNameEl.textContent = fromName;

    // Date badge
    const dateBadge = document.getElementById("dateBadge");
    const now = new Date();
    dateBadge.textContent = `${String(now.getDate()).padStart(2,'0')}.${String(now.getMonth()+1).padStart(2,'0')}.${now.getFullYear()}`;

    // Build letter: sentence -> photo -> sentence -> photo ... (1..9)
    function buildLetter(){
      letterContent.innerHTML = "";
      for(let i=0;i<9;i++){
        const s = LETTER_SENTENCES[i] ?? "";
        const p = document.createElement("div");
        p.className = "sentence";
        p.textContent = s;
        letterContent.appendChild(p);

        const img = document.createElement("img");
        img.className = "inlinePhoto";
        img.src = photos[i];
        img.alt = `photo ${i+1}`;
        letterContent.appendChild(img);
      }
    }
    buildLetter();

    // Hearts start immediately
    function spawnHeart(){
      const h = document.createElement("div");
      h.className = "heart";
      const size = 10 + Math.random()*16;
      h.style.width = size + "px";
      h.style.height = size + "px";
      h.style.left = (Math.random()*100) + "vw";
      h.style.animationDuration = (3.2 + Math.random()*3.8) + "s";
      h.style.opacity = (0.35 + Math.random()*0.55).toFixed(2);
      document.body.appendChild(h);
      setTimeout(()=>h.remove(), 8000);
    }
    setInterval(spawnHeart, 520);
    for(let i=0;i<12;i++) setTimeout(spawnHeart, i*90);

    // YES/NO scaling
    let noCount = 0;
    let yesScale = 1;
    let noScale  = 1;

    const noMsgs = [
      "—Ç–æ—á–Ω–æ? ü•∫",
      "–ø–∏–Ω–≥–≤–∏–Ω—ë–Ω–æ–∫ –≥—Ä—É—Å—Ç–∏—Ç üòø",
      "–Ω—É –ø–æ–∂–∞–ª—É–π—Å—Ç–∞‚Ä¶ üíó",
      "—è –æ—á–µ–Ω—å –ø—Ä–æ—à—É üò≥",
      "–ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å‚Ä¶ ü•∫üíû"
    ];

    noBtn.addEventListener("click", () => {
      noCount++;

      yesScale = Math.min(yesScale + 0.22, 4.0);
      yesBtn.style.transform = `scale(${yesScale})`;

      noScale = Math.max(noScale - 0.12, 0.35);
      noBtn.style.transform = `scale(${noScale})`;
      noBtn.style.opacity = String(Math.max(0.35, noScale));

      counterText.textContent = `–ù–ï–¢ –Ω–∞–∂–∞–ª–∏: ${noCount} —Ä–∞–∑`;

      const msg = noMsgs[Math.min(noCount-1, noMsgs.length-1)];
      questionText.textContent = `–î–∏–∞–Ω–∞, –±—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? (${msg})`;

      spawnHeart();
      if (noCount % 2 === 0) spawnHeart();
    });

    // Modal open/close
    function openModal(){
      modal.classList.add("show");
      document.body.style.overflow = "hidden";
    }
    function closeModal(){
      modal.classList.remove("show");
      document.body.style.overflow = "";
    }
    closeBtn.addEventListener("click", closeModal);
    modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });
    window.addEventListener("keydown", (e) => { if (e.key === "Escape" && modal.classList.contains("show")) closeModal(); });

    // Confetti (canvas)
    const confettiCanvas = document.getElementById("confetti");
    const ctx = confettiCanvas.getContext("2d");
    function resizeCanvas(){
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    let pieces = [];
    let running = false;

    function startConfetti(durationMs=2700){
      confettiCanvas.classList.add("show");
      running = true;
      pieces = [];

      const w = confettiCanvas.width;
      const h = confettiCanvas.height;

      const count = 240;
      for(let i=0;i<count;i++){
        pieces.push({
          x: Math.random()*w,
          y: -20 - Math.random()*h*0.25,
          ww: 6 + Math.random()*8,
          hh: 4 + Math.random()*6,
          vx: -2 + Math.random()*4,
          vy: 2.8 + Math.random()*5.0,
          rot: Math.random()*Math.PI,
          vr: -0.12 + Math.random()*0.24,
          a: 0.95,
          c: `rgba(255, ${210 + Math.floor(Math.random()*35)}, ${220 + Math.floor(Math.random()*25)}, 1)`
        });
      }

      const start = performance.now();
      function tick(t){
        if(!running) return;
        const elapsed = t - start;

        ctx.clearRect(0,0,w,h);
        pieces.forEach(p=>{
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;
          p.vy += 0.02;
          p.a = Math.max(0, p.a - 0.002);

          ctx.save();
          ctx.globalAlpha = p.a;
          ctx.fillStyle = p.c;
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillRect(-p.ww/2, -p.hh/2, p.ww, p.hh);
          ctx.restore();
        });

        pieces = pieces.filter(p => p.y < h + 40 && p.a > 0.06);

        if(elapsed < durationMs && pieces.length){
          requestAnimationFrame(tick);
        } else {
          running = false;
          ctx.clearRect(0,0,w,h);
          confettiCanvas.classList.remove("show");
        }
      }
      requestAnimationFrame(tick);
    }

    // YES: music + confetti + modal + hearts burst
    yesBtn.addEventListener("click", () => {
      loveMusic.play().catch(()=>{});
      for(let i=0;i<18;i++) setTimeout(spawnHeart, i*45);
      startConfetti(2700);
      openModal();
    });
  </script>
</body>
</html>
