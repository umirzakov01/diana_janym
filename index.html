<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–î–∏–∞–Ω–µ üíó</title>
  <style>
    :root{
      --bg1:#fff0f7;
      --bg2:#ffe2ef;
      --bg3:#ffd2e6;
      --hot:#ff4d8d;
      --hot2:#ff2f78;

      --text:#25161d;
      --muted:#7a5060;

      --glass: rgba(255,255,255,.84);
      --stroke: rgba(255,77,141,.18);
      --shadow: 0 22px 70px rgba(25,10,17,.18);
      --shadow2: 0 14px 30px rgba(255,77,141,.16);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 650px at 20% 20%, var(--bg1), transparent 60%),
        radial-gradient(900px 650px at 80% 30%, var(--bg2), transparent 60%),
        radial-gradient(700px 520px at 60% 90%, var(--bg3), transparent 55%),
        linear-gradient(180deg, #fff, #fff6fa);
      overflow-x:hidden;
    }

    /* hearts from start */
    .heart{
      position:fixed;
      bottom:-30px;
      width:16px;height:16px;
      transform: rotate(45deg);
      background: rgba(255,77,141,.48);
      border-radius:4px;
      animation: floatUp linear forwards;
      pointer-events:none;
      z-index:0;
      filter: blur(.1px);
    }
    .heart:before,.heart:after{
      content:"";
      position:absolute;
      width:16px;height:16px;
      background: inherit;
      border-radius:50%;
    }
    .heart:before{ left:-8px; top:0; }
    .heart:after{ left:0; top:-8px; }
    @keyframes floatUp{
      from{ transform: translateY(0) rotate(45deg); opacity:.9; }
      to{ transform: translateY(-110vh) rotate(45deg); opacity:0; }
    }

    .wrap{
      position:relative;
      z-index:1;
      min-height:100svh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 22px 16px 44px;
    }

    .panel{
      width:min(980px,100%);
      background: var(--glass);
      backdrop-filter: blur(12px);
      border: 1px solid var(--stroke);
      border-radius: 28px;
      box-shadow: var(--shadow);
      padding: 20px;
      position:relative;
      overflow:hidden;
    }

    .shine{
      position:absolute;
      inset:-160px;
      pointer-events:none;
      background:
        radial-gradient(circle at 22% 18%, rgba(255,77,141,.18), transparent 45%),
        radial-gradient(circle at 78% 22%, rgba(255,182,213,.22), transparent 42%),
        radial-gradient(circle at 52% 85%, rgba(255,77,141,.10), transparent 40%);
    }

    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 10px;
    }
    .badge{
      font-size:12px;
      font-weight:900;
      letter-spacing:.14em;
      color:#b23563;
      background: rgba(255,77,141,.12);
      border: 1px solid rgba(255,77,141,.18);
      padding: 8px 10px;
      border-radius:999px;
      user-select:none;
      white-space:nowrap;
    }

    h1{
      margin: 8px 0 6px;
      text-align:center;
      font-size: clamp(34px, 5vw, 58px);
      line-height:1.04;
      letter-spacing:.02em;
    }
    .subtitle{
      margin:0 0 14px;
      text-align:center;
      color:var(--muted);
      font-size: 15px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap: 16px;
      align-items:stretch;
    }
    @media (max-width: 880px){ .grid{ grid-template-columns: 1fr; } }

    .card{
      background: rgba(255,255,255,.88);
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 24px;
      box-shadow: var(--shadow2);
      padding: 18px;
      position:relative;
      overflow:hidden;
    }

    /* ===== PENGUIN (CSS) ===== */
    .penguinStage{
      display:flex;
      justify-content:center;
      align-items:center;
      margin-top: 4px;
      margin-bottom: 10px;
    }
    .penguin{
      width: 120px;
      height: 140px;
      position:relative;
      transform-origin: 50% 100%;
      animation: penguinBounce 1.8s ease-in-out infinite;
      filter: drop-shadow(0 14px 20px rgba(255,77,141,.18));
    }
    @keyframes penguinBounce{
      0%,100%{ transform: translateY(0) rotate(-1deg); }
      50%{ transform: translateY(-6px) rotate(1deg); }
    }
    .p-body{
      position:absolute;
      inset: 18px 16px 6px 16px;
      background: #1f1b1e;
      border-radius: 60px 60px 54px 54px;
    }
    .p-belly{
      position:absolute;
      left: 24px; right: 24px;
      top: 46px; bottom: 18px;
      background: #ffffff;
      border-radius: 50px;
      opacity:.95;
    }
    .p-head{
      position:absolute;
      left: 22px; right: 22px;
      top: 0px;
      height: 70px;
      background: #1f1b1e;
      border-radius: 60px 60px 50px 50px;
    }
    .p-cheek{
      position:absolute;
      width: 16px; height: 10px;
      background: rgba(255,77,141,.35);
      border-radius: 999px;
      top: 42px;
      filter: blur(.1px);
    }
    .p-cheek.left{ left: 10px; }
    .p-cheek.right{ right: 10px; }

    .p-eye{
      position:absolute;
      width: 10px; height: 10px;
      background:#fff;
      border-radius:50%;
      top: 30px;
    }
    .p-eye.left{ left: 24px; }
    .p-eye.right{ right: 24px; }
    .p-eye:after{
      content:"";
      position:absolute;
      width: 4px; height: 4px;
      background:#111;
      border-radius:50%;
      left: 3px; top: 3px;
    }
    .p-blink{
      position:absolute;
      left:0; right:0;
      top:0; bottom:0;
      border-radius:50%;
      background:#1f1b1e;
      transform: scaleY(0);
      transform-origin: 50% 50%;
      animation: blink 4.2s infinite;
      opacity:.95;
    }
    @keyframes blink{
      0%, 92%, 100% { transform: scaleY(0); }
      94% { transform: scaleY(1); }
      96% { transform: scaleY(0); }
    }

    .p-beak{
      position:absolute;
      left:50%;
      top: 42px;
      width: 18px; height: 12px;
      transform: translateX(-50%);
      background: linear-gradient(180deg, #ffcc6b, #ffb74d);
      border-radius: 0 0 12px 12px;
    }

    .p-flipper{
      position:absolute;
      width: 34px; height: 60px;
      background:#1f1b1e;
      top: 58px;
      border-radius: 20px;
      transform-origin: 50% 10%;
    }
    .p-flipper.left{
      left: 0px;
      transform: rotate(18deg);
    }
    .p-flipper.right{
      right: 0px;
      transform: rotate(-18deg);
      animation: wave 1.6s ease-in-out infinite;
    }
    @keyframes wave{
      0%,100%{ transform: rotate(-18deg); }
      50%{ transform: rotate(-46deg); }
    }

    .p-heart{
      position:absolute;
      left:50%;
      top: -14px;
      width: 18px; height:18px;
      transform: translateX(-50%) rotate(45deg);
      background: rgba(255,77,141,.75);
      border-radius: 4px;
      animation: heartPop 1.6s ease-in-out infinite;
    }
    .p-heart:before,.p-heart:after{
      content:"";
      position:absolute;
      width: 18px; height:18px;
      background: inherit;
      border-radius:50%;
    }
    .p-heart:before{ left:-9px; top:0; }
    .p-heart:after{ left:0; top:-9px; }
    @keyframes heartPop{
      0%,100%{ transform: translateX(-50%) rotate(45deg) scale(.92); opacity:.75; }
      50%{ transform: translateX(-50%) rotate(45deg) scale(1.05); opacity:.95; }
    }

    /* ===== Question + buttons ===== */
    .question{
      font-size: 22px;
      font-weight: 950;
      text-align:center;
      margin: 6px 0 4px;
    }
    .hint{
      text-align:center;
      margin:0;
      color: rgba(122,80,96,.9);
      font-size: 13px;
    }
    .btnRow{
      margin-top: 14px;
      display:flex;
      gap: 12px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
    }

    button{
      border:none;
      cursor:pointer;
      border-radius:999px;
      padding: 14px 22px;
      font-weight: 950;
      letter-spacing:.03em;
      transition: transform .15s ease, box-shadow .15s ease, filter .15s ease, opacity .15s ease;
      touch-action: manipulation;
      user-select:none;
      min-width: 140px;
    }

    #yesBtn{
      background: linear-gradient(180deg, var(--hot), var(--hot2));
      color:#fff;
      box-shadow: 0 16px 28px rgba(255,77,141,.35);
      transform: scale(1);
    }
    #yesBtn:hover{ filter: brightness(1.03); }
    #yesBtn:active{ transform: scale(.98); }

    #noBtn{
      background: rgba(255,255,255,.98);
      color:#b23563;
      border: 2px solid rgba(255,77,141,.32);
      box-shadow: 0 14px 26px rgba(255,77,141,.12);
      transform: scale(1);
    }

    .counter{
      margin-top: 12px;
      text-align:center;
      font-size: 13px;
      color:#b23563;
      background: rgba(255,77,141,.10);
      border: 1px dashed rgba(255,77,141,.25);
      border-radius: 16px;
      padding: 8px 10px;
    }

    .sideTitle{
      margin: 0 0 10px;
      font-size: 13px;
      letter-spacing:.12em;
      color:#b23563;
      font-weight: 950;
      text-transform: uppercase;
    }
    .sideText{
      margin:0 0 10px;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.5;
    }
    .miniBox{
      background: rgba(255,77,141,.08);
      border: 1px solid rgba(255,77,141,.14);
      border-radius: 18px;
      padding: 10px 12px;
      font-size: 13px;
      color:#5c3344;
    }

    /* ===== Modal letter + Apple-like ribbon ===== */
    .modal{
      position:fixed;
      inset:0;
      display:none;
      align-items:flex-end;
      justify-content:center;
      padding: 0;
      background: rgba(22,10,16,.45);
      z-index:50;
    }
    .modal.show{ display:flex; }

    /* Bottom sheet style (like iOS) */
    .sheet{
      width: min(980px, 100%);
      height: min(92svh, 860px);
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(255,77,141,.18);
      border-radius: 28px 28px 0 0;
      box-shadow: 0 -30px 90px rgba(0,0,0,.25);
      overflow:hidden;
      position:relative;
    }

    .sheetHeader{
      padding: 12px 14px 10px;
      border-bottom: 1px solid rgba(0,0,0,.06);
      background: linear-gradient(180deg, rgba(255,240,246,.95), rgba(255,255,255,0));
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }
    .sheetHeader h2{
      margin:0;
      font-size: 20px;
      line-height:1.2;
    }
    .sheetHeader p{
      margin: 6px 0 0;
      color: var(--muted);
      font-size: 14px;
    }
    .closeBtn{
      background: rgba(255,77,141,.12);
      border: 1px solid rgba(255,77,141,.22);
      color:#b23563;
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 950;
      cursor:pointer;
      white-space:nowrap;
    }

    .sheetBody{
      height: calc(100% - 62px);
      overflow:auto;
      padding: 14px;
      padding-bottom: 140px; /* place for ribbon */
    }

    .letter{
      background:#fff;
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 24px;
      padding: 16px 14px;
      box-shadow: 0 12px 28px rgba(255,77,141,.12);
      position:relative;
      overflow:hidden;
    }
    .ribbon{
      position:absolute;
      top:16px;
      right:-58px;
      transform: rotate(35deg);
      background: linear-gradient(180deg, var(--hot), var(--hot2));
      color:#fff;
      font-weight: 950;
      padding: 10px 78px;
      letter-spacing:.10em;
      font-size: 12px;
      box-shadow: 0 12px 24px rgba(255,77,141,.35);
    }
    .letter h3{
      margin: 0 0 10px;
      font-size: 22px;
    }
    .para{
      margin: 0 0 10px;
      color:#4e2c3a;
      line-height: 1.65;
      font-size: 15px;
      white-space: pre-wrap;
    }
    .sig{
      margin-top: 12px;
      text-align:right;
      color: var(--muted);
      font-size: 14px;
      font-style: italic;
    }

    /* Apple-like bottom ribbon (sticky) */
    .ribbonDock{
      position:absolute;
      left:0; right:0; bottom:0;
      padding: 10px 12px 16px;
      background: linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,.92) 25%, rgba(255,255,255,.92));
      border-top: 1px solid rgba(0,0,0,.06);
      backdrop-filter: blur(10px);
    }
    .dockTitle{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 8px;
      color:#b23563;
      font-weight: 950;
      letter-spacing: .10em;
      font-size: 12px;
      text-transform: uppercase;
    }

    .carouselWrap{
      position:relative;
    }
    .edgeFade{
      position:absolute;
      top:0; bottom:0;
      width: 28px;
      pointer-events:none;
      z-index:2;
    }
    .edgeFade.left{
      left:0;
      background: linear-gradient(90deg, rgba(255,255,255,.92), rgba(255,255,255,0));
    }
    .edgeFade.right{
      right:0;
      background: linear-gradient(270deg, rgba(255,255,255,.92), rgba(255,255,255,0));
    }

    .carousel{
      display:flex;
      gap: 12px;
      overflow:auto;
      padding: 2px 28px 2px 28px;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
    }
    .carousel::-webkit-scrollbar{ height: 8px; }
    .carousel::-webkit-scrollbar-thumb{
      background: rgba(255,77,141,.25);
      border-radius:999px;
    }

    .shot{
      flex: 0 0 auto;
      width: 170px;
      height: 110px;
      border-radius: 18px;
      overflow:hidden;
      border: 1px solid rgba(0,0,0,.06);
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
      scroll-snap-align: center;
      position:relative;
      transform: perspective(700px) rotateY(0deg);
      transition: transform .2s ease, filter .2s ease;
      background:#fff;
    }
    .shot img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .shot .cap{
      position:absolute;
      left:10px; bottom:10px;
      background: rgba(20,10,16,.52);
      color:#fff;
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      backdrop-filter: blur(6px);
    }

    /* confetti canvas */
    #confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:60;
      display:none;
    }
    #confetti.show{ display:block; }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>

  <div class="wrap">
    <div class="panel">
      <div class="shine"></div>

      <div class="top">
        <div class="badge">üíó SOFT PINK</div>
        <div class="badge" id="dateBadge"></div>
      </div>

      <h1>BE MY VALENTINE üíå</h1>
      <p class="subtitle">–î–∏–∞–Ω–∞‚Ä¶ –ø–∏–Ω–≥–≤–∏–Ω—ë–Ω–æ–∫ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–ª –ø–∏—Å—å–º–æ üêßüíó</p>

      <div class="grid">
        <div class="card" style="text-align:center;">
          <div class="penguinStage">
            <div class="penguin" aria-label="penguin">
              <div class="p-heart"></div>
              <div class="p-flipper left"></div>
              <div class="p-flipper right"></div>
              <div class="p-body"></div>
              <div class="p-belly"></div>
              <div class="p-head">
                <div class="p-eye left"><div class="p-blink"></div></div>
                <div class="p-eye right"><div class="p-blink"></div></div>
                <div class="p-beak"></div>
                <div class="p-cheek left"></div>
                <div class="p-cheek right"></div>
              </div>
            </div>
          </div>

          <div class="question" id="questionText">–î–∏–∞–Ω–∞, –±—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π?</div>
          <p class="hint">NO —Å—Ç–∞–Ω–µ—Ç –º–µ–Ω—å—à–µ, YES —Å—Ç–∞–Ω–µ—Ç –±–æ–ª—å—à–µ</p>

          <div class="btnRow">
            <button id="yesBtn">–î–ê üíñ</button>
            <button id="noBtn">–ù–ï–¢ üôà</button>
          </div>

          <div class="counter" id="counterText">–ù–ï–¢ –Ω–∞–∂–∞–ª–∏: 0 —Ä–∞–∑</div>
        </div>

        <div class="card">
          <div class="sideTitle">–§–∞–π–ª—ã</div>
          <p class="sideText">
            –ü–æ–ª–æ–∂–∏ —Ä—è–¥–æ–º <b>music.mp3</b> –∏ –ø–∞–ø–∫—É <b>photos</b> —Å —Ñ–æ—Ç–æ <b>1.jpg‚Äì9.jpg</b>.
          </p>
          <div class="miniBox">
            ‚ö†Ô∏è –ú—É–∑—ã–∫–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞ –ø–æ ‚Äú–î–ê‚Äù ‚Äî –∏–Ω–∞—á–µ –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç.
          </div>
          <div style="height:12px"></div>
          <div class="sideTitle">–ü–∏—Å—å–º–æ</div>
          <p class="sideText">
            –Ø —Å–¥–µ–ª–∞–ª –ø–æ–ª–µ –¥–ª—è —Ç–≤–æ–µ–≥–æ —Ç–µ–∫—Å—Ç–∞. –í—Å—Ç–∞–≤—å —Å–≤–æ—ë –ø–∏—Å—å–º–æ –≤ <b>LETTER_TEXT</b> –≤–Ω–∏–∑—É —Ñ–∞–π–ª–∞ ‚Äî –∏ –≤—Å—ë –±—É–¥–µ—Ç –∫–∞–∫ –Ω–∞–¥–æ.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Music -->
  <audio id="loveMusic" loop>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <!-- Modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true">
    <div class="sheet">
      <div class="sheetHeader">
        <div>
          <h2>–ü–∏—Å—å–º–æ –¥–ª—è –î–∏–∞–Ω—ã üíå</h2>
          <p>–ê —Å–Ω–∏–∑—É ‚Äî –ª–µ–Ω—Ç–∞ —Ñ–æ—Ç–æ (–∫–∞–∫ —É Apple) ‚ú®</p>
        </div>
        <button class="closeBtn" id="closeBtn">–ó–∞–∫—Ä—ã—Ç—å ‚úñ</button>
      </div>

      <div class="sheetBody">
        <div class="letter">
          <div class="ribbon">LOVE</div>
          <h3>–î–∏–∞–Ω–∞,</h3>
          <p class="para" id="letterText"></p>
          <div class="sig">‚Äî –æ—Ç: <span id="fromName">–¢–í–û–Å –ò–ú–Ø</span></div>
        </div>
      </div>

      <!-- Bottom ribbon -->
      <div class="ribbonDock">
        <div class="dockTitle">
          <span>–§–æ—Ç–æ 1‚Äì9</span>
          <span style="letter-spacing:0; text-transform:none; font-weight:800; color:rgba(122,80,96,.9);">
            –ª–∏—Å—Ç–∞–π ‚Üí
          </span>
        </div>

        <div class="carouselWrap">
          <div class="edgeFade left"></div>
          <div class="edgeFade right"></div>
          <div class="carousel" id="carousel"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ====== –í–°–¢–ê–í–¨ –°–Æ–î–ê –°–í–û–Å –ü–ò–°–¨–ú–û (—Ç–æ—á–Ω–æ –∫–∞–∫ —Ç—ã –ø–∏—Å–∞–ª) ======
    const LETTER_TEXT =
`(–í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Ç–≤–æ—ë –ø–∏—Å—å–º–æ –î–∏–∞–Ω–µ.
–ú–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫.
–Ø –æ—Å—Ç–∞–≤–∏–ª –ø–µ—Ä–µ–Ω–æ—Å—ã ‚Äî –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –∫—Ä–∞—Å–∏–≤–æ.)`;
    // ==========================================================

    const fromName = "–¢–í–û–Å –ò–ú–Ø"; // –≤–ø–∏—à–∏ —Å–≤–æ—ë –∏–º—è

    // 9 —Ñ–æ—Ç–æ (–µ—Å–ª–∏ —É —Ç–µ–±—è png ‚Äî –ø–æ–º–µ–Ω—è–π .jpg –Ω–∞ .png)
    const photos = Array.from({length:9}, (_,i)=> `photos/${i+1}.jpg`);

    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const counterText = document.getElementById("counterText");
    const questionText = document.getElementById("questionText");

    const modal = document.getElementById("modal");
    const closeBtn = document.getElementById("closeBtn");
    const loveMusic = document.getElementById("loveMusic");

    const fromNameEl = document.getElementById("fromName");
    const letterTextEl = document.getElementById("letterText");
    const carousel = document.getElementById("carousel");
    fromNameEl.textContent = fromName;
    letterTextEl.textContent = LETTER_TEXT;

    // Date badge
    const dateBadge = document.getElementById("dateBadge");
    const now = new Date();
    dateBadge.textContent = `${String(now.getDate()).padStart(2,'0')}.${String(now.getMonth()+1).padStart(2,'0')}.${now.getFullYear()}`;

    // Build Apple-like ribbon
    function buildRibbon(){
      carousel.innerHTML = "";
      photos.forEach((src, idx)=>{
        const card = document.createElement("div");
        card.className = "shot";
        const img = document.createElement("img");
        img.src = src;
        img.alt = `photo ${idx+1}`;
        const cap = document.createElement("div");
        cap.className = "cap";
        cap.textContent = `‚ù§ ${idx+1}`;
        card.appendChild(img);
        card.appendChild(cap);

        // tiny interactive tilt on pointer move (very Apple-ish)
        card.addEventListener("mousemove", (e)=>{
          const r = card.getBoundingClientRect();
          const x = (e.clientX - r.left) / r.width - 0.5;
          card.style.transform = `perspective(700px) rotateY(${x*10}deg)`;
        });
        card.addEventListener("mouseleave", ()=>{
          card.style.transform = "perspective(700px) rotateY(0deg)";
        });

        carousel.appendChild(card);
      });
    }
    buildRibbon();

    // Hearts start immediately
    function spawnHeart(){
      const h = document.createElement("div");
      h.className = "heart";
      const size = 10 + Math.random()*16;
      h.style.width = size + "px";
      h.style.height = size + "px";
      h.style.left = (Math.random()*100) + "vw";
      h.style.animationDuration = (3.2 + Math.random()*3.8) + "s";
      h.style.opacity = (0.35 + Math.random()*0.55).toFixed(2);
      document.body.appendChild(h);
      setTimeout(()=>h.remove(), 8000);
    }
    setInterval(()=> spawnHeart(), 520);
    // also a small burst at start
    for(let i=0;i<12;i++) setTimeout(spawnHeart, i*90);

    // YES/NO scaling
    let noCount = 0;
    let yesScale = 1;
    let noScale  = 1;

    const noMsgs = [
      "—Ç–æ—á–Ω–æ? ü•∫",
      "–ø–∏–Ω–≥–≤–∏–Ω—ë–Ω–æ–∫ –≥—Ä—É—Å—Ç–∏—Ç üòø",
      "–Ω—É –ø–æ–∂–∞–ª—É–π—Å—Ç–∞‚Ä¶ üíó",
      "–î–ê —Ç–∞–∫–∞—è –∫—Ä–∞—Å–∏–≤–∞—è‚Ä¶ üôà",
      "—è –æ—á–µ–Ω—å –ø—Ä–æ—à—É üò≥",
      "–ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å‚Ä¶ ü•∫üíû"
    ];

    noBtn.addEventListener("click", () => {
      noCount++;

      yesScale = Math.min(yesScale + 0.22, 4.0);
      yesBtn.style.transform = `scale(${yesScale})`;

      noScale = Math.max(noScale - 0.12, 0.35);
      noBtn.style.transform = `scale(${noScale})`;
      noBtn.style.opacity = String(Math.max(0.35, noScale));

      counterText.textContent = `–ù–ï–¢ –Ω–∞–∂–∞–ª–∏: ${noCount} —Ä–∞–∑`;
      const msg = noMsgs[Math.min(noCount-1, noMsgs.length-1)];
      questionText.textContent = `–î–∏–∞–Ω–∞, –±—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? (${msg})`;

      spawnHeart();
      if (noCount % 2 === 0) spawnHeart();
    });

    // Modal open/close
    function openModal(){
      modal.classList.add("show");
      document.body.style.overflow = "hidden";
    }
    function closeModal(){
      modal.classList.remove("show");
      document.body.style.overflow = "";
    }
    closeBtn.addEventListener("click", closeModal);
    modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });
    window.addEventListener("keydown", (e) => { if (e.key === "Escape" && modal.classList.contains("show")) closeModal(); });

    // Confetti (canvas)
    const confettiCanvas = document.getElementById("confetti");
    const ctx = confettiCanvas.getContext("2d");
    function resizeCanvas(){
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    let pieces = [];
    let running = false;

    function startConfetti(durationMs=2600){
      confettiCanvas.classList.add("show");
      running = true;
      pieces = [];

      const w = confettiCanvas.width;
      const h = confettiCanvas.height;

      const count = 220;
      for(let i=0;i<count;i++){
        pieces.push({
          x: Math.random()*w,
          y: -20 - Math.random()*h*0.25,
          w: 6 + Math.random()*8,
          h: 4 + Math.random()*6,
          vx: -2 + Math.random()*4,
          vy: 2.8 + Math.random()*5.0,
          rot: Math.random()*Math.PI,
          vr: -0.12 + Math.random()*0.24,
          a: 0.95,
          // soft pink palette
          c: `rgba(255, ${210 + Math.floor(Math.random()*35)}, ${220 + Math.floor(Math.random()*25)}, 1)`
        });
      }

      const start = performance.now();
      function tick(t){
        if(!running) return;
        const elapsed = t - start;

        ctx.clearRect(0,0,w,h);
        pieces.forEach(p=>{
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;
          p.vy += 0.02;
          p.a = Math.max(0, p.a - 0.002);

          ctx.save();
          ctx.globalAlpha = p.a;
          ctx.fillStyle = p.c;
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
          ctx.restore();
        });

        pieces = pieces.filter(p => p.y < h + 40 && p.a > 0.06);

        if(elapsed < durationMs && pieces.length){
          requestAnimationFrame(tick);
        } else {
          running = false;
          ctx.clearRect(0,0,w,h);
          confettiCanvas.classList.remove("show");
        }
      }
      requestAnimationFrame(tick);
    }

    // YES: music + confetti + modal + hearts burst
    yesBtn.addEventListener("click", () => {
      loveMusic.play().catch(()=>{});
      for(let i=0;i<18;i++) setTimeout(spawnHeart, i*45);
      startConfetti(2700);
      openModal();
    });
  </script>
</body>
</html>
